<form class='flex relative h-9 primaryFilterRadius'>
    <span class="z-10 font-normal text-center text-filterFontColor absolute right-6 top-1 rounded text-base items-center justify-center">
        <i class='text-sm' :class="searchIcon ? searchIcon : 'fas fa-search'"></i>
    </span>
    <input
        type="text"
        :placeholder="metadata.placeholder || 'Search'"
        class="primaryFilterRadius w-full text-filterFontColor bg-filterBackgroundColor border border-filterBorderColor flex justify-around items-center pl-4 focus:outline-none hover:bg-filterHighlightColor hover:text-filterFontHighlightColor"
        v-model='queryText'
    />
</form>

<script type='visualization/javascript'>
    export default {
        name: "SearchFilter",
        data: () => ({
            text_internal: null,
        }),
        props: ['searchIcon'],
        computed: {
            queryText: {
                get() {
                    return this.text_internal;
                },
                set(value) {
                    this.text_internal = value;
                    this.setFilterValue("query", this.text_internal, true);
                }
            }
        },
        methods: {
            onVisualizationInit() {

                const initial_value = this.getFilterValue("query");
                if (initial_value) {
                    this.text_internal = initial_value;
                    this.setFilterValue("query", this.text_internal, true);
                    return this.text_internal;
                }
            }
        }
    }
</script>